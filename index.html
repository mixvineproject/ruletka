<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Рулетка</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(45deg, blue, orange);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }

        @keyframes gradient {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        #wheel {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 5px solid black;
            position: relative;
            overflow: hidden;
            transform: rotate(0deg); /* Initial rotation */
        }

        .sector {
            width: 50%;
            height: 50%;
            position: absolute;
            left: 50%;
            top: 0;
            transform-origin: left top;
            background-size: cover;
            font-size: 1.2em; /* Increased font size */
            color: white; /* Text color */
            display: flex;
            justify-content: center;
            align-items: center;

        }


        #prizePopup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 10;
            text-align: center;
        }
        #prizePopup.epic {
            box-shadow: 0 0 20px purple;
        }
        #prizePopup.mythical {
            box-shadow: 0 0 20px red;
        }
        #prizePopup.legendary {
            box-shadow: 0 0 30px yellow;
        }

        .spin-button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }


    </style>
</head>
<body>

    <div id="wheel">
       
    </div>

    <div id="prizePopup">
        <h2 id="prizeText"></h2>
        <p>Заскриньте и отправьте боту в Telegram.</p>
        <a href="https://t.me/mixvinebot" target="_blank" class="telegram-button"><button>Перейти к боту</button></a>
    </div>


    <button class="spin-button">Крутить рулетку</button>
    <p>Нажмите "Крутить рулетку", чтобы испытать удачу!</p>
    <p><a href="https://t.me/mixvinebot" target="_blank">Если вы столкнулись с проблемой, свяжитесь с ботом MixVine</a></p>
    <p>© Project MixVine 2024</p>
    <p>ver. web3.1Global</p>



<script>
    const wheel = document.getElementById('wheel');
    const prizePopup = document.getElementById('prizeText');
    const popup = document.getElementById('prizePopup');
    const spinButton = document.querySelector('.spin-button');

    const prizes = [
        { text: "Слабый приз", chance: 50, color: "#4CAF50" },
        { text: "Обычный приз", chance: 40, color: "#2196F3" },
        { text: "Необычный приз", chance: 30, color: "#f44336" },
        { text: "Редкий приз", chance: 25, color: "#ff9800" },
        { text: "Эпический приз", chance: 20, color: "#9C27B0" },
        { text: "Мифический приз", chance: 10, color: "#673AB7"},
        { text: "Легендарный приз", chance: 5, color: "#FFD700" }
    ];

    let currentRotation = 0;

    function createWheelSectors() {
        let totalChance = 0;
        prizes.forEach(prize => totalChance += prize.chance);

        let startAngle = 0;
        prizes.forEach(prize => {
            const sectorAngle = (prize.chance / totalChance) * 360;
            const sector = document.createElement('div');
            sector.classList.add('sector');
            sector.style.backgroundColor = prize.color;
            sector.style.transform = `rotate(${startAngle}deg) skewY(${-90 + sectorAngle}deg)`; 
            sector.textContent = prize.text; // Add text to sector
            wheel.appendChild(sector);
            startAngle += sectorAngle;
        });
    }

    function spinWheel() {
        let randomNumber = Math.random() * 100;
        let accumulatedChance = 0;
        let winningPrize;
        spinButton.disabled = true;

        for (const prize of prizes) {
            accumulatedChance += prize.chance;
            if (randomNumber < accumulatedChance) {
                winningPrize = prize;
                break;
            }
        }

        const winningAngle = prizes.reduce((acc, prize, index) => {
            if (prize === winningPrize) {
              return acc;
            }
            return acc + (prize.chance / 150) * 360;
          }, 0);
          
        const extraSpin = 3 * 360; // Spin 3 times more
        const finalAngle = -(currentRotation + winningAngle + extraSpin + (360 - winningAngle) % 360) ; 
        currentRotation = finalAngle % 360;


        wheel.style.transition = 'transform 3s ease-out';
        wheel.style.transform = `rotate(${finalAngle}deg)`;

        setTimeout(() => {
            popup.style.display = 'block';
            prizePopup.textContent = winningPrize.text;

            popup.classList.remove("epic", "mythical", "legendary");
            if (winningPrize.text === "Эпический приз") {
                popup.classList.add("epic");
            } else if (winningPrize.text === "Мифический приз") {
                popup.classList.add("mythical");
            } else if (winningPrize.text === "Легендарный приз") {
                popup.classList.add("legendary");
                prizePopup.textContent = "Поздравляем! " + winningPrize.text;
            }
            spinButton.disabled = false; // Re-enable the button after the popup is shown
        }, 3000);



    }

    createWheelSectors();

    spinButton.addEventListener('click', spinWheel);
    popup.addEventListener('click', function(event){
    if (event.target === popup) {
        popup.style.display = 'none';
        wheel.style.transition = 'none'; // Remove transition to avoid jump
    }
});

</script>

</body>
</html>
